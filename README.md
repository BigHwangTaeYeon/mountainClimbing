# mountainClimbing

[Oauth 2.0](#Oauth-231007)

[Security](#Security)

[NEXT](#NEXT)

# 20230919
api ë‚´ìš© ë“±ì‚° > ë¬¸í™”ì˜ˆìˆ ê³µì—°ìœ¼ë¡œ ë³€ê²½

//ë¬¸í™”ì²´ìœ¡ê´€ê´‘ë¶€_ë¬¸í™”ì˜ˆìˆ ê³µì—°(í†µí•©)
//ë¬¸í™”ì²´ìœ¡ê´€ê´‘ë¶€ ëŒ€í‘œ ëˆ„ë¦¬ì§‘ì˜ 'ë¬¸í™”ì˜ˆìˆ ê³µì—°' ê²Œì‹œíŒ ë° ë¬¸í™”í¬í„¸(https://www.culture.go.kr/)ì— ë“±ë¡ëœ ê²Œì‹œê¸€ì„ ì—°ê³„í•˜ì—¬ ì œê³µí•˜ëŠ” ê³µì—°ì „ì‹œ í”„ë¡œê·¸ëž¨ ì •ë³´ë¡œ ì—°ê·¹, ë®¤ì§€ì»¬, ì˜¤íŽ˜ë¼, ìŒì•…, ì½˜ì„œíŠ¸, êµ­ì•…, ë¬´ìš©, ì „ì‹œ, ê¸°íƒ€ ë“± ê° ë¶„ì•¼ì˜ ë¬¸í™”ì˜ˆìˆ ê³µì—° ëª©ë¡ ì •ë³´ë¥¼ í†µí•© ì œê³µí•˜ê³  ìžˆìŠµë‹ˆë‹¤.
//https://www.culture.go.kr/data/openapi/openapiView.do?id=580

# 20230920
íšŒì‚¬ gradle version
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.2.1-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists

# 230923
ë…¸íŠ¸ë¶ gradle version
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.2.1-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists

# 230924
CREATE TABLE CULTURE_API {
      PSEQ            NUMBER(10)        NOT NULL    PRIMARY KEY     COMMENT 'ì»¨í…ì¸ PK'
    , TITLE           VARCHAR2(100)                                 COMMENT 'ì œëª©'
    , PERIOD          VARCHAR(100)                                  COMMENT 'ê¸°ê°„'
    , EVENTPERIOD     VARCHAR(100)                                  COMMENT 'ì‹œê°„'
    , EVENTSITE       VARCHAR(100)                                  COMMENT 'ìž¥ì†Œ'
    , CHARGE          VARCHAR(100)                                  COMMENT 'ê¸ˆì•¡'
    , CONTACTPOINT    VARCHAR2(100)                                 COMMENT 'ë¬¸ì˜ì•ˆë‚´'
    , URL             VARCHAR(1000)                                 COMMENT 'URL'
    , IMAGEOBJECT     VARCHAR(100)                                  COMMENT 'ì´ë¯¸ì§€(ì¸ë„¤ì¼)'
    , DESCRIPTION     VARCHAR2(100000)                              COMMENT 'ì„¤ëª…'
    , VIEWCOUNT       VARCHAR(1000)                                 COMMENT 'ì¡°íšŒìˆ˜'
    , REGDATE         DATE                                          COMMENT 'ë“±ë¡ì¼ìž'
}

# 230926
ë‚ ì”¨ API
ê¸°ìƒì²­_ì¤‘ê¸°ì˜ˆë³´ ì¡°íšŒì„œë¹„ìŠ¤
https://www.data.go.kr/data/15059468/openapi.do
key = wvclTcKfaznWPJW5f137YCcDLJ41ee+6his8ede7mYo6xCNwf1isheXbQpXzRKN6IX7v7ilYRbYzPAEkM0Bl0Q==
6ì‹œ 18ì‹œ ì¼ 2íšŒ ì¡°íšŒ
ë§ˆì´íŽ˜ì´ì§€ > ë°ì´í„°í™œìš© > OpenAPI > í™œìš©ì‹ ì²­í˜„í™©
https://apis.data.go.kr/1360000/MidFcstInfoService/getMidLandFcst
?serviceKey=wvclTcKfaznWPJW5f137YCcDLJ41ee%2B6his8ede7mYo6xCNwf1isheXbQpXzRKN6IX7v7ilYRbYzPAEkM0Bl0Q%3D%3D&pageNo=1&numOfRows=10&dataType=JSON&regId=11B00000&tmFc=202309260600

# 230928
ë…¸íŠ¸ë¶
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "java",
            "name": "Current File",
            "request": "launch",
            "mainClass": "${file}"
        },
        {
            "type": "java",
            "name": "PublicapiApplication",
            "request": "launch",
            "mainClass": "side.project.publicapi.PublicapiApplication",
            "projectName": "publicapi"
        }
    ]
}

CREATE TABLE CULTURE_API (
      PSEQ            NUMBER(10)        NOT NULL    PRIMARY KEY 
    , TITLE           VARCHAR2(100)                              
    , PERIOD          VARCHAR(100)                               
    , EVENTPERIOD     VARCHAR(100)                                 
    , EVENTSITE       VARCHAR(100)                                
    , CHARGE          VARCHAR(100)                                 
    , CONTACTPOINT    VARCHAR2(100)                               
    , URL             VARCHAR(1000)                                
    , IMAGEOBJECT     VARCHAR(100)                              
    , DESCRIPTION     VARCHAR2(1000)                           
    , VIEWCOUNT       VARCHAR(1000)                               
    , REGDATE         DATE                                        
)
;

COMMENT ON TABLE CULTURE_API IS 'ë¬¸í™”API';
COMMENT ON COLUMN CULTURE_API.PSEQ IS 'ì»¨í…ì¸ PK';
COMMENT ON COLUMN CULTURE_API.TITLE IS 'ì œëª©';
COMMENT ON COLUMN CULTURE_API.PERIOD IS 'ê¸°ê°„';
COMMENT ON COLUMN CULTURE_API.EVENTPERIOD IS 'ì‹œê°„';
COMMENT ON COLUMN CULTURE_API.EVENTSITE IS 'ìž¥ì†Œ';
COMMENT ON COLUMN CULTURE_API.CHARGE IS 'ê¸ˆì•¡';
COMMENT ON COLUMN CULTURE_API.CONTACTPOINT IS 'ë¬¸ì˜ì•ˆë‚´';
COMMENT ON COLUMN CULTURE_API.URL IS 'URL';
COMMENT ON COLUMN CULTURE_API.IMAGEOBJECT IS 'ì´ë¯¸ì§€(ì¸ë„¤ì¼)';
COMMENT ON COLUMN CULTURE_API.DESCRIPTION IS 'ì„¤ëª…';
COMMENT ON COLUMN CULTURE_API.VIEWCOUNT IS 'ì¡°íšŒìˆ˜';
COMMENT ON COLUMN CULTURE_API.REGDATE IS 'ë“±ë¡ì¼ìž';

# 230929
ORACLE 3ê°œì›”ë§ˆë‹¤ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í•´ì•¼í•¨.
ì•„ëž˜ ëª…ë ¹ìœ¼ë¡œ ë§Œë£Œê°€ ë˜ì§€ ì•Šë„ë¡ ì„¤ì •.
ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;

# 230930
API TABLE ìˆ˜ì •
CREATE TABLE CULTURE_API (
      PSEQ            NUMBER(10)        NOT NULL    PRIMARY KEY 
    , TITLE           VARCHAR2(4000)                              
    , PERIOD          VARCHAR(100)                               
    , EVENTPERIOD     VARCHAR(100)                                 
    , EVENTSITE       VARCHAR(100)                                
    , CHARGE          VARCHAR(100)                                 
    , CONTACTPOINT    VARCHAR2(4000)                               
    , URL             VARCHAR(1000)                                
    , IMAGEOBJECT     VARCHAR(100)                              
    , DESCRIPTION     VARCHAR(4000)                           
    , VIEWCOUNT       VARCHAR(1000)                               
    , REGDATE         DATE                                        
)
;
(https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/)
Spring ë°ì´í„° ë¦´ë¦¬ìŠ¤ íŠ¸ë ˆì¸	/ ìŠ¤í”„ë§ ë°ì´í„° Elasticsearch	/ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜	/ ìŠ¤í”„ë§ í”„ë ˆìž„ì›Œí¬	/ ìŠ¤í”„ë§ ë¶€íŠ¸
2023.0 (ìš¸ë§Œ)                   5.1.x                           8.7.1               6.0.x           3.1.x
2022.0(íŠœë§)                    5.0.x                           8.5.3               6.0.x           3.0.x

version
elasticsearch-7.10.2
boot 3.0.x

JPAë¥¼ ê³µë¶€í•˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ ì—°ë™ì´ íž˜ë“¤ì—ˆë‹¤.
ìµœëŒ€í•œ ê°€ë²¼ìš´ ì„¤ì •ìœ¼ë¡œ ì ìš©í•˜ì˜€ìœ¼ë©°, JPA ê³µë¶€ í›„ ì»¤ìŠ¤í…€ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
    implementation('org.elasticsearch.client:elasticsearch-rest-high-level-client:6.5.3')
    implementation('org.elasticsearch:elasticsearch:6.5.3')
	implementation('org.springframework.boot:spring-boot-starter-webflux')
Spring WebFluxëŠ” Spring 5ì—ì„œ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ëª¨ë“ˆì´ë‹¤.
WebFluxëŠ” í´ë¼ì´ì–¸íŠ¸, ì„œë²„ì—ì„œ reactive ìŠ¤íƒ€ì¼ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ë„ì™€ì£¼ëŠ” ëª¨ë“ˆì´ë©°, 
reactive-stack web frameworkì´ë©° non-blockingì— reactive streamì„ ì§€ì›í•©ë‹ˆë‹¤.

https://devuna.tistory.com/120
https://velog.io/@zenon8485/Reactor-Java-1.-Mono%EC%99%80-Flux%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95
ê¸°ë³¸ ê°œë…

# 231001
elastic search version & java version
https://www.elastic.co/kr/support/matrix#matrix_jvm

AES ì•”í˜¸í™”/ë³µí˜¸í™” ì‚¬ìš©
javax.crypto.Cipher í´ëž˜ìŠ¤ëŠ” ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì„ ë‚˜íƒ€ë‚¸ë‹¤.
ì•”í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•˜ê±°ë‚˜ ë³µí˜¸í™”í•  ìˆ˜ ìžˆë‹¤.
ì•„ëž˜ì™€ ê°™ì´ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜, ìš´ìš© ë°©ì‹ ê·¸ë¦¬ê³  íŒ¨ë”© ë°©ì‹ì„ ì „ë‹¬í•´ Cipher ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
https://aday7.tistory.com/entry/Java-AES-%EC%95%94%ED%98%B8%ED%99%94%EB%B3%B5%ED%98%B8%ED%99%94-%EC%98%88%EC%A0%9C-AES-256

# 231002
ì—˜ë¼ìŠ¤í‹±ì„œì¹˜ 7.10.2 ë§žì¶”ê¸° ìœ„í•´ open JDK 11ë¡œ ì„¸íŒ…í–ˆë‹¤.
ë¶„ëª… ë¬¸ì„œì—ëŠ” openJDK 1.8ë„ ëœë‹¤ í•˜ëŠ”ë°, ì‹¤í–‰ ì‹œ 11ì„ ìš”êµ¬í•œë‹¤..

https://devhan.tistory.com/310#ViewController%20%EC%83%9D%EC%84%B1-1
ìŠ¤í”„ë§ë¶€íŠ¸ 3.X ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‚¬ìš©í•´ì„œ íšŒì›ê°€ìž…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ êµ¬í˜„í•˜ê¸°
ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” ì‹œíë¦¬í‹° ê¸°ëŠ¥ì„ ë§Žì´ ì‚¬ìš©í•œë‹¤.
ì •ë¦¬í•´ì„œ ë³´ê³  ì´í•´í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

# 231003
ì‹œíë¦¬í‹° ìž¬ìž‘ì—… 
https://velog.io/@wooryung/Spring-Boot-Spring-Security%EB%A5%BC-%EC%A0%81%EC%9A%A9%ED%95%98%EC%97%AC-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0
ì‹œíë¦¬í‹° ë³´ì•ˆ ìž‘ë™ì€ ê°€ëŠ¥í•˜ë‚˜, ë¡œê·¸ì¸ í›„ ë‹¤ë¥¸ íŽ˜ì´ì§€ ì´ë™ ë¶ˆê°€.
ì¸ê°€ ë¬¸ì œì¸ë“¯

# 231004
// UserDetailsService ì¸í„°íŽ˜ì´ìŠ¤ëŠ” DBì—ì„œ ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•œë‹¤.
https://nahwasa.com/entry/%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-30%EC%9D%B4%EC%83%81-Spring-Security-%EA%B8%B0%EB%B3%B8-%EC%84%B8%ED%8C%85-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0
ìŠ¤í”„ë§ë¶€íŠ¸ 3.0ì´ìƒ Spring Security ê¸°ë³¸ ì„¸íŒ… (ìŠ¤í”„ë§ ì‹œíë¦¬í‹°)
í™•ì‹¤ížˆ ì •ë¦¬ ìž˜ ë˜ì–´ìžˆë‹¤.

# 231006
// https://fvor001.tistory.com/123
WebSocket í”„ë¡œê·¸ëž˜ë°ì€ ì‹¤ì‹œê°„ ì±„íŒ…, ê²Œìž„, ì£¼ì‹ ì‹œì„¸ ë“± ë‹¤ì–‘í•œ ë¶„ì•¼ì—ì„œ í™œìš©ëœë‹¤.

# Oauth-231007
https://adjh54.tistory.com/221

ðŸ’¡ OAuth(Open Authorization)
- ì¸í„°ë„· ì‚¬ìš©ìžë“¤ì´ íŠ¹ì • ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì ‘ê·¼í•˜ê³ ìž í•  ë•Œ 'ì ‘ê·¼í•˜ë ¤ëŠ” ì›¹ ì‚¬ì´íŠ¸ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œê³µí•˜ì§€ ì•Šê³ ' 
- ì„œë“œíŒŒí‹° ì• í”Œë¦¬ì¼€ì´ì…˜(êµ¬ê¸€, ì¹´ì¹´ì˜¤, íŽ˜ì´ìŠ¤ë¶ ë“±)ì˜ ì—°ê²°ì„ í†µí•´ 'ì¸ì¦ ë° ê¶Œí•œ'ì„ ë¶€ì—¬ë°›ì„ ìˆ˜ ìžˆëŠ” í”„ë¡œí† ì½œì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ë¹„êµ ë¶„ë¥˜	        OAuth 1.0a 	            OAuth 2.0

ì¶œì‹œì¼	            2007	                2012
í”„ë¡œí† ì½œ	        Request/Token	        Authorization/Token
í† í° ìœ í˜•	        í•œ ë²ˆë§Œ ì‚¬ìš© ê°€ëŠ¥	     ë‹¤ì¤‘ ì‚¬ìš© ê°€ëŠ¥
í† í° ì§€ì† ê¸°ê°„	    íê¸°ë˜ê¸° ì „ê¹Œì§€	         êµ¬ì„±ëœ ê¸°ê°„
í† í° ê°±ì‹ 	        ì—†ìŒ	                ë¦¬í”„ë ˆì‹œ í† í°
ì„œëª… ë°©ë²•	        HMAC-SHA1	            ë‹¤ì¤‘ ì˜µì…˜
SSL í•„ìˆ˜ ì—¬ë¶€	    ì•„ë‹ˆì˜¤	                ì˜ˆ
í´ë¼ì´ì–¸íŠ¸  ì¸ì¦	ì„œëª…	                ë‹¤ì¤‘ ì˜µì…˜
ë¶€ì—¬ ìœ í˜•	        ì—†ìŒ	                ë‹¤ì¤‘ ì˜µì…˜
ëª¨ë°”ì¼ ì§€ì›	        ë‚®ìŒ	                ë†’ìŒ
ë³´ì•ˆ	            ì ì€ ë³´í˜¸ ê¸°ëŠ¥	        ë” ë§Žì€ ë³´í˜¸ ê¸°ëŠ¥

- OAuth 1.0ì€ 2007ë…„ ë¦´ë¦¬ì¦ˆ ë˜ì—ˆê³  OAuth 1.0aëŠ” 2010ë…„ì— ë¦´ë¦¬ì¦ˆ ë˜ì—ˆìŠµë‹ˆë‹¤.

ðŸ’¡ Spring Boot OAuth 2 Client ëž€?
- Spring Boot í”„ë ˆìž„ì›Œí¬ì—ì„œ OAuth 2.0 í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ì„ ìˆ˜í–‰í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ìž…ë‹ˆë‹¤.
- OAuth 2.0 í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. 
- ì´ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ì œê³µìžì˜ APIë¥¼ ì‚¬ìš©í•˜ê³  ì¸ì¦ëœ ì‚¬ìš©ìž ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ðŸ’¡ Spring Boot OAuth 2 Clientì™€ Spring Boot OAuth 2 Serverì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€?
- Spring Boot OAuth 2 ClientëŠ” â€˜OAuth 2.0 ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì¸ì¦ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ëª¨ë“ˆâ€™ì´ê³  
- Spring Boot OAuth 2 ServerëŠ” â€˜OAuth 2.0 ì„œë²„ë¥¼ ë¹ ë¥´ê²Œ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ëª¨ë“ˆâ€™ìž…ë‹ˆë‹¤.

- Spring Boot OAuth 2 ClientëŠ” â€˜ì™¸ë¶€ OAuth 2.0 ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì¸ì¦ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ëª¨ë“ˆ'ìž…ë‹ˆë‹¤. 
    ì´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•œ ì„¤ì •ë§Œìœ¼ë¡œ OAuth 2.0 í”„ë¡œí† ì½œì„ ë”°ë¥´ëŠ” ì„œë¹„ìŠ¤ì˜ ì¸ì¦ì„ ì²˜ë¦¬í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
- Spring Boot OAuth 2 ServerëŠ” OAuth 2.0 'ì„œë²„ë¥¼ ë¹ ë¥´ê²Œ êµ¬ì¶•í•  ìˆ˜ ìžˆë„ë¡ ì§€ì›í•˜ëŠ” ëª¨ë“ˆ'ìž…ë‹ˆë‹¤. 
    ì´ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ ê°„ë‹¨í•œ ì„¤ì •ë§Œìœ¼ë¡œ OAuth 2.0 í”„ë¡œí† ì½œì„ ë”°ë¥´ëŠ” ì„œë²„ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ìž / ë¦¬ì†ŒìŠ¤ ì†Œìœ ìž(User / Resource Owner)	   
    - ì¸ì¦ì„ ë‹´ë‹¹í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì™€ ë¦¬ì†ŒìŠ¤ ê³µìœ ì— ëŒ€í•œ ë™ì˜ë¥¼ ì œê³µí•˜ëŠ” ìµœì¢… ì‚¬ìš©ìžë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
ì‚¬ìš©ìž ì—ì´ì „íŠ¸(User-Agent)	                       
    - ì‚¬ìš©ìžê°€ ì‚¬ìš©í•˜ëŠ” ë¸Œë¼ìš°ì €ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
í´ë¼ì´ì–¸íŠ¸(Client)	                               
    - ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
ì¸ì¦ ì„œë²„(Authorization Server)	                   
    - ì‚¬ìš©ìž/í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¸ì¦í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ì„œë²„ìž…ë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê³  í‰ìƒ ë™ì•ˆ ì¶”ì í•©ë‹ˆë‹¤.
ë¦¬ì†ŒìŠ¤ ì„œë²„ (Resource Server)	                   
    - ìš”ì²­ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” APIìž…ë‹ˆë‹¤. ì•¡ì„¸ìŠ¤ í† í°ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³  ì¸ì¦ì„ ì œê³µí•©ë‹ˆë‹¤. ex) ì¹´ì¹´ì˜¤, ë„¤ì´ë²„, êµ¬ê¸€, ...

ì œê³µìž (Provider)               
    - ì‚¬ìš©ìžê°€ ë¡œê·¸ì¸í•˜ë ¤ëŠ” ì„œë¹„ìŠ¤(ì˜ˆ: Naver, Kakao, Google, Facebook, GitHub)ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
    - ProviderëŠ” OAuth 2.0 í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìž ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
ì¸ê°€ ì½”ë“œ (Authorization Code)	
    - ì‚¬ìš©ìžì—ê²Œ ì¸ê°€ë¥¼ ë°›ê¸° ìœ„í•œ ì¤‘ìš”í•œ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ â€˜ê¶Œí•œ ìš”ì²­â€™ìœ¼ë¡œ Providerì—ê²Œ ìš”ì²­í•˜ì—¬ ë°˜í™˜ë˜ëŠ” ì½”ë“œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
    - ì¸ê°€ ì½”ë“œì˜ ë°œê¸‰ ê³¼ì •ì€ ClientëŠ” Providerì—ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ê¶Œí•œ ìš”ì²­ â†’ ProviderëŠ” ìŠ¹ì¸ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ê²Œ ì¸ê°€ ì½”ë“œ ë°˜í™˜
ì ‘ê·¼ í† í° (Access Token)	    
    - ì‚¬ì „ì— ë°œê¸‰ ë°›ì€ ì¸ê°€ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°œê¸‰ë˜ëŠ” í† í°ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 
    - ì ‘ê·¼ í† í°ì˜ ë°œê¸‰ ê³¼ì •ì€ ClientëŠ” ì‚¬ì „ì— ë°œê¸‰ ë°›ì€ ì¸ê°€ ì½”ë“œë¥¼ ê¸°ë°˜ ìš”ì²­ â†’ ProviderëŠ” ìŠ¹ì¸ í›„ Clientì—ê²Œ ì ‘ê·¼ í† í°ì„ ë°œê¸‰ í•´ì¤ë‹ˆë‹¤.
    - ì ‘ê·¼ í† í°ì€ ì œí•œëœ ì‹œê°„ë™ì•ˆ ìœ íš¨í•˜ë©° ë§Œë£Œëœ í´ë¼ì´ì–¸íŠ¸ëŠ” ìƒˆë¡œìš´ ì ‘ê·¼ í† í°ì„ ìš”ì²­í•´ì•¼í•©ë‹ˆë‹¤.

OAuth 2 Client ê¸°ë³¸ ë™ìž‘ ì›ë¦¬
ðŸ’¡ ì‚¬ìš©ìžê°€ íŠ¹ì • ì›¹ ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•˜ê³  ì‹¶ë‹¤ê³  ê°€ì •ì„ í•˜ë©° ì‚¬ìš©ìžëŠ” ì„œë“œíŒŒí‹° ì• í”Œë¦¬ì¼€ì´ì…˜(Facebook, Github, Google, Microsoft)ì„ í†µí•´ ë¡œê·¸ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
1. User enters credentials: ì‚¬ìš©ìžëŠ” ì„œë“œíŒŒí‹° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„ íƒí•˜ë©´ ë¡œê·¸ì¸ì„ ìœ„í•´ í•´ë‹¹ ì›¹ ì‚¬ì´íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ ë©ë‹ˆë‹¤.
    (User â†’ Client)
2. Client passes credentials and its identification to authiorization server. Authiorization Server validates the information and returns an access token.: 
    ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ íŠ¹ì • ì›¹ì‚¬ì´íŠ¸ì—ì„œ ìš”ì²­í•œ íŠ¹ì • ë°ì´í„°ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í• ì§€ ë¬»ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë˜ë©° ì›í•˜ëŠ” ì˜µì…˜ì„ ì„ íƒí•˜ê³  
    ì¸ì¦ ì½”ë“œ ë˜ëŠ” ì˜¤ë¥˜ ì½”ë“œì™€ í•¨ê»˜ íŠ¹ì • ì‚¬ì´íŠ¸ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ ë©ë‹ˆë‹¤.
    (Client â†” Authorization Server)
3. The Client uses access token to access resource server: íƒ€ì‚¬ ë¦¬ì†ŒìŠ¤ì˜ ìž‘ì—…ì— ë”°ë¼ ë¡œê·¸ì¸ì´ ì„±ê³µí•˜ê±°ë‚˜ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
    (Client â†” Resource Server)

![img](https://blog.kakaocdn.net/dn/43Hog/btsmRn7ySFC/YViQ4kDz3nAC2DA8X1gRDk/img.png)

ì£¼ìš” ê¸°ëŠ¥
OAuth 2.0 í”„ë¡œí† ì½œ ì¸ì¦
    - OAuth 2.0 í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ì²˜ë¦¬ ê°€ëŠ¥
ë‹¤ì–‘í•œ OAuth 2.0 ì œê³µ ì—…ì²´ì™€ í†µí•©
    - ë‹¤ì–‘í•œ OAuth 2.0 ì œê³µ ì—…ì²´ì™€ í†µí•© ê°€ëŠ¥
OAuth 2.0 ì¸ì¦ í† í° ê´€ë¦¬
    - OAuth 2.0 ì¸ì¦ í† í°ì„ ê´€ë¦¬ ê°€ëŠ¥
ì‚¬ìš©ìž ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    - OAuth 2.0 ì¸ì¦ì„ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ìž ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìžˆìŒ

ì£¼ìš” íŠ¹ì§•
ê°„íŽ¸í•œ ì„¤ì •	
    - Spring Bootì˜ ìžë™ ì„¤ì • ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ OAuth 2 í´ë¼ì´ì–¸íŠ¸ë¥¼ ë¹ ë¥´ê²Œ ì„¤ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ë‹¤ì–‘í•œ ì¸ì¦ ê³µê¸‰ìž ì§€ì›	
    - Google, Facebook, GitHub, Okta, OAuth2ë¥¼ ì§€ì›í•˜ëŠ” ë§Žì€ ì¸ì¦ ê³µê¸‰ìžë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥	
    - ì¸ì¦ ê³µê¸‰ìžì˜ ì„¤ì •ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê±°ë‚˜, ìƒˆë¡œìš´ ì¸ì¦ ê³µê¸‰ìžë¥¼ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ë³´ì•ˆ	
    - Spring Securityë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ê³¼ ê¶Œí•œ ë¶€ì—¬ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.


- Spring Boot OAuth 2 Client ì¸ì¦ë°©ì‹

Password Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ìžì˜ ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ íŠ¹ì • ìƒí™©ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
Client Credentials Grant	
    - í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìžì‹ ì˜ ì´ë¦„ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ì¦ì— ì‚¬ìš©ë©ë‹ˆë‹¤.
Authorization Code Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” ê¶Œí•œ ë¶€ì—¬ ì„œë²„ì—ì„œ ê¶Œí•œ ë¶€ì—¬ ì½”ë“œë¥¼ ìš”ì²­í•˜ê³ , ì´ë¥¼ ì•¡ì„¸ìŠ¤ í† í°ìœ¼ë¡œ êµí™˜í•©ë‹ˆë‹¤. 
    - ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ ì‚¬ìš©ìžì˜ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•´ì•¼ í•˜ëŠ” ì›¹ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
Implicit Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” ê¶Œí•œ ë¶€ì—¬ ì½”ë“œë¥¼ ë¨¼ì € ìš”ì²­í•˜ëŠ” ëŒ€ì‹ , ì§ì ‘ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ ë³´ì•ˆ ì·¨ì•½ì  ë•Œë¬¸ì— ê¶Œìž¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
Refresh Token Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬í”„ë ˆì‹œ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ ì‚¬ìš©ìžê°€ ìž¬ì¸ì¦í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í°ì„ ì–»ê¸° ìœ„í•´ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
JWT Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” JSON Web Token (JWT)ì„ ì–´ì„¤ì…˜ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ ë‹¨ì¼ ë¡œê·¸ì¸ (SSO) ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
SAML Extension Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” ë³´ì•ˆ ì–´ì„¤ì…˜ ë§ˆí¬ì—… ì–¸ì–´ (SAML) ì–´ì„¤ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ë„ SSO ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
Kerberos OAuth2 Grant	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” Kerberos í‹°ì¼“ì„ ì–´ì„¤ì…˜ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ì€ Windows í™˜ê²½ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
NTLM ê·¸ëžœíŠ¸	
    - í´ë¼ì´ì–¸íŠ¸ëŠ” Windows NT LAN Manager (NTLM) ì¸ì¦ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ ê·¸ëžœíŠ¸ íƒ€ìž…ë„ Windows í™˜ê²½ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

ðŸ’¡ ë‹¤ì–‘í•œ ì¸ì¦ì„ ìœ„í•œ ìŠ¹ì¸ë°©ì‹ë“¤ì´ ë§Žì´ ìžˆìŠµë‹ˆë‹¤. ì´ì¤‘ì— ê°€ìž¥ ëŒ€ì¤‘ì ì´ê³  ë§Žì´ ì‚¬ìš©ë˜ëŠ” ë°©ì‹ì€ â€˜Authorization Code Grantâ€™ìž…ë‹ˆë‹¤.
ê¶Œí•œ ì½”ë“œ ìŠ¹ì¸ ë°©ì‹ (Authorization Code Grant)
- í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©ìž ì¸ì¦ì„ ë°›ê¸° ìœ„í•´ ì¸ê°€ ì„œë²„(Authorization Server)ì— ì¸ì¦ ì½”ë“œë¥¼ ìš”ì²­í•˜ê³  ì´ë¥¼ ì´ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°(Access Token)ì„ ë°œê¸‰ë°›ëŠ” ê³¼ì •ì„ ë§í•©ë‹ˆë‹¤.

ë™ìž‘ê³¼ì •
1. Access Application: ì‚¬ìš©ìžëŠ” ì•±ì— ì ‘ê·¼í•˜ì—¬ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.
2. Authentication and Request Authorization: ì•±ì€ ì‚¬ìš©ìžë¥¼ ì¸ì¦ ì„œë²„ë¡œ ë¦¬ë””ë ‰ì…˜ í•˜ê³ , ì‚¬ìš©ìžì˜ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤. 
    ì´ ê³¼ì •ì—ì„œ, ì‚¬ìš©ìžì—ê²Œ ì²˜ìŒìœ¼ë¡œ ì•±ì— ëŒ€í•œ ê¶Œí•œ ë¶€ì—¬ íŽ˜ì´ì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤. ì´ íŽ˜ì´ì§€ì—ì„œ ì‚¬ìš©ìžëŠ” ì•±ì´ ì‚¬ìš©ìžì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê¶Œí•œì„ ì„ íƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
3. Authentication and Grant Authorization: í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ìžë¥¼ ì¸ì¦í•˜ê¸° ìœ„í•´ Authorization Serverì— ì¸ì¦ ì½”ë“œë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
4. Send Authorization Code: ì‚¬ìš©ìžëŠ” Authorization Serverì— ë¡œê·¸ì¸í•˜ì—¬ ì¸ì¦ ì½”ë“œë¥¼ ë°›ìŠµë‹ˆë‹¤.
5. Request Code Exchange for Token: í´ë¼ì´ì–¸íŠ¸ëŠ” Authorization Serverì— ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•˜ê³ , ì¸ì¦ ì½”ë“œì™€ í•¨ê»˜ ì „ì†¡í•©ë‹ˆë‹¤.
6. Issue Access Token: Authorization ServerëŠ” ìœ íš¨í•œ ì¸ì¦ ì½”ë“œì¸ì§€ í™•ì¸í•˜ê³ , ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤.
7. Request Resource w/ Access Token: í´ë¼ì´ì–¸íŠ¸ëŠ” ì•¡ì„¸ìŠ¤ í† í°ì„ ì´ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ì„œë²„(Resource Server)ì—ì„œ ì‚¬ìš©ìž ì •ë³´ ë“±ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•©ë‹ˆë‹¤.
8. Return Resource: ì•¡ì„¸ìŠ¤ í† í°ì´ ìœ íš¨í•œ ê²½ìš°, ë¦¬ì†ŒìŠ¤ ì„œë²„ëŠ” ì•±ì´ ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

![img](https://blog.kakaocdn.net/dn/GqkYb/btsmPFU85mX/bNlK9yUnxoy8B4vi90iKY1/img.png)

ðŸ’¡ ì¸ì¦ ì„œë²„(Authorization Server)
- OAuth2 í”„ë¡œí† ì½œì—ì„œ ì¸ì¦ê³¼ ê¶Œí•œ ë¶€ì—¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ì„œë²„ìž…ë‹ˆë‹¤. 
    í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ìžì˜ ê¶Œí•œì„ ì¸ì¦ ì„œë²„ì— ìš”ì²­í•˜ê³  ì¸ì¦ ì„œë²„ëŠ” ì‚¬ìš©ìžì˜ ë™ì˜ë¥¼ ì–»ì–´ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤.
    ì´ ì•¡ì„¸ìŠ¤ í† í°ì€ ë¦¬ì†ŒìŠ¤ ì„œë²„ì—ì„œ ì‚¬ìš©ìžì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ê¶Œí•œ ë¶€ì—¬ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

ðŸ’¡ ë¦¬ì†ŒìŠ¤ ì„œë²„(Resource Server)
- OAuth2 í”„ë¡œí† ì½œì—ì„œ ì¸ì¦ ì„œë²„ë¡œë¶€í„° ë°œê¸‰ë°›ì€ ì•¡ì„¸ìŠ¤ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì¸ê°€í•˜ê³  ì‘ë‹µí•˜ëŠ” ì„œë²„ìž…ë‹ˆë‹¤. 
    ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ëŠ” ì‚¬ìš©ìž ì •ë³´ì™€ ê°™ì€ ì¤‘ìš”í•œ ë°ì´í„°ë¥¼ í¬í•¨í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ðŸ’¡ ì•”ì‹œì  ìŠ¹ì¸ ë°©ì‹ (Implicit Grant)
- í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ Access Tokenì„ ì§ì ‘ ë°œê¸‰ë°›ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‚¬ìš©ìž ì—ì´ì „íŠ¸(ì›¹ ë¸Œë¼ìš°ì € ë“±)ë¥¼ í†µí•´ ì¸ê°€ ê³¼ì •ì„ ê±°ì³ Access Tokenì„ ë°œê¸‰ë°›ëŠ” ë°©ì‹ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- Authorization Code Grantì™€ëŠ” ë‹¬ë¦¬ Access Tokenì„ ì§ì ‘ ë°œê¸‰ë°›ê¸° ë•Œë¬¸ì— Access Tokenì´ ë…¸ì¶œë  ìœ„í—˜ì€ ìžˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ë°©ì‹ì€ ë³´ì•ˆì ì¸ ì·¨ì•½ì ì´ ìžˆìœ¼ë¯€ë¡œ ê¶Œìž¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

    ë³´ì•ˆì ì¸ ì·¨ì•½ì ì´ ë°œìƒë˜ëŠ” ì´ìœ 
    1. Access Tokenì´ ë…¸ì¶œë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
        - í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” JavaScriptë¥¼ í†µí•´ URL Fragmentë¥¼ ì½ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°, ì•…ì˜ì ì¸ ê³µê²©ìžê°€ JavaScriptë¥¼ ì´ìš©í•˜ì—¬ Access Tokenì„ íƒˆì·¨í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    2. Access Tokenì˜ ìˆ˜ëª…ì´ ë¬´ì œí•œìž…ë‹ˆë‹¤.
        - ì•”ì‹œì  ìŠ¹ì¸ ë°©ì‹ì—ì„œëŠ” Access Tokenì˜ ìˆ˜ëª…ì„ ì œì–´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Access Tokenì€ ì‚¬ìš©ìžê°€ ë¡œê·¸ì•„ì›ƒí•˜ê±°ë‚˜, ì¼ì • ê¸°ê°„ì´ ì§€ë‚˜ê¸° ì „ì—ëŠ” ë§Œë£Œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” Access Tokenì´ íƒˆì·¨ë  ê²½ìš°, ì•…ì˜ì ì¸ ê³µê²©ìžê°€ ê³„ì†í•´ì„œ í•´ë‹¹ Access Tokenì„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    3. Access Tokenì´ ì œí•œì ì¸ ë²”ìœ„ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
        - Access Tokenì˜ ë²”ìœ„(scope)ë¥¼ ì œì–´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” Access Tokenì„ ì›í•˜ëŠ” ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ëŠ” ê¶Œí•œì´ ì—†ëŠ” ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    4. Access Tokenì´ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ ì—†ì´ ë°œê¸‰ë©ë‹ˆë‹¤.
        - í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ Access Tokenì„ ë°œê¸‰ë°›ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ì•…ì˜ì ì¸ ê³µê²©ìžê°€ í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ Access Tokenì„ ë°œê¸‰ë°›ì„ ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

    ë™ìž‘ê³¼ì •
    1. Access client application: í´ë¼ì´ì–¸íŠ¸ëŠ” í´ë¼ì´ì–¸íŠ¸ IDì™€ í—ˆê°€ ìœ í˜• ë° ê¸°íƒ€ ì„ íƒì  ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤.
    2. User authorization request: ë¦¬ì†ŒìŠ¤ ì†Œìœ ìžê°€ ê¶Œí•œ ë¶€ì—¬ ì„œë²„ì™€ ì§ì ‘ ì¸ì¦í•˜ë¯€ë¡œ í•´ë‹¹ ìžê²© ì¦ëª…ì€ í´ë¼ì´ì–¸íŠ¸ì™€ ê³µìœ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    3. User authorizaties and authorizes the application: ê¶Œí•œ ë¶€ì—¬ ì„œë²„ëŠ” URI ì¡°ê°ì„ í†µí•´ ì•¡ì„¸ìŠ¤ í† í°ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
    4. Redirect URL with access token in fragment: í´ë¼ì´ì–¸íŠ¸ëŠ” ì¡°ê°ì—ì„œ í† í°ì„ ì¶”ì¶œí•˜ê³  ì•¡ì„¸ìŠ¤ í† í°ê³¼ í•¨ê»˜ API ìš”ì²­ì„ ë¦¬ì†ŒìŠ¤ ì„œë²„ë¡œ ë³´ëƒ…ë‹ˆë‹¤.

ðŸ’¡ í´ë¼ì´ì–¸íŠ¸ ìžê²© ì¦ëª… ë°©ì‹ (Client Credentials Grant)
- í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìžì‹ ì˜ ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Access Tokenì„ ì§ì ‘ ë°œê¸‰ë°›ëŠ” ë°©ë²•ìž…ë‹ˆë‹¤. ì´ ë°©ì‹ì€ í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ìžì²´ì˜ ì¸ì¦ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

ðŸ’¡ í´ë¼ì´ì–¸íŠ¸ ìžê²© ì¦ëª… ë°©ì‹ (Client Credentials Grant) ë™ìž‘ê³¼ì •
1. Client authentication: í´ë¼ì´ì–¸íŠ¸ ì‘ìš© í”„ë¡œê·¸ëž¨ì€ ê¶Œí•œ ë¶€ì—¬ ì„œë²„ì—ì„œ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•˜ê³  í´ë¼ì´ì–¸íŠ¸ í‚¤ì™€ í´ë¼ì´ì–¸íŠ¸ ì•”í˜¸ë¡œ ìš”ì²­ì„ ì¸ì¦í•©ë‹ˆë‹¤.
2. Access Token: í´ë¼ì´ì–¸íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ë˜ë©´ ì•¡ì„¸ìŠ¤ í† í°ì´ ë°˜í™˜ë©ë‹ˆë‹¤.

ðŸ’¡ ë¹„ë°€ë²ˆí˜¸ ìžê²©ì¦ëª… ë°©ì‹(Password Credentials Grant)
- í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©ìžì˜ ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì—¬ Access Tokenì„ ìš”ì²­í•˜ëŠ” ë°©ë²•ìž…ë‹ˆë‹¤. ì´ ë°©ì‹ì€ íŠ¹ì • ìƒí™©ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

ðŸ’¡ ë¹„ë°€ë²ˆí˜¸ ìžê²©ì¦ëª… ë°©ì‹(Password Credentials Grant) ë™ìž‘ê³¼ì •
1. Authenticate with credentials: ì‚¬ìš©ìžëŠ” í´ë¼ì´ì–¸íŠ¸ ìžì²´ì—ì„œ ì‚¬ìš©ìžì—ê²Œ ë¦¬ì†ŒìŠ¤ ì†Œìœ ìžì˜ ì‚¬ìš©ìž ì´ë¦„ê³¼ ì•”í˜¸ë¥¼ ë¬»ìŠµë‹ˆë‹¤.
2. Access token request: í´ë¼ì´ì–¸íŠ¸ëŠ” ìžê²© ì¦ëª…ì„ í´ë¼ì´ì–¸íŠ¸ ìžì‹ ì˜ ìžê²© ì¦ëª…ê³¼ í•¨ê»˜ ê¶Œí•œ ì„œë²„ë¡œ ë³´ëƒ…ë‹ˆë‹¤.
3. Access token: ê¶Œí•œ ì„œë²„ëŠ” í† í°ì„ ë°œê¸‰í•´ ì¤ë‹ˆë‹¤.

# 231008
1. https://console.cloud.google.com/
2. https://velog.io/@leeeeeyeon/%EC%8A%A4%ED%94%84%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0%EC%99%80-OAuth-2.0%EC%9C%BC%EB%A1%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0
3. https://chb2005.tistory.com/182
Oauth 2.0 Google

# Security

ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ í•œë²ˆì¯¤ì€ ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒì„ í•´ë³´ì…¨ì„ ê²ƒìž…ë‹ˆë‹¤. ì´ë ‡ê²Œ ì•„ì´ë””ì™€ ì•”í˜¸ë¥¼ ì´ìš©í•´ì„œ ë¡œê·¸ì¸ í•˜ëŠ” ê³¼ì •ì„ ì¸ì¦(Authentication)ì´ë¼ê³  í•©ë‹ˆë‹¤.
ë„¤ì´ë²„ ì¹´íŽ˜ë¥¼ ì‚¬ìš©í•´ë³´ë©´ ë¡œê·¸ì¸ì„ í–ˆë‹¤ í•˜ë”ë¼ë„, íŠ¹ì • ì¹´íŽ˜ëŠ” íšŒì›ê°€ìž…ì„ í•˜ê³  ì–´ëŠì •ë„ ì´ìƒì˜ ë“±ê¸‰ì´ ë˜ì§€ ì•Šì„ ê²½ìš° ì´ìš©ì„ ëª»í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì„ ìš°ë¦¬ëŠ” ì¸ê°€(Authorization)ë¼ê³  í•©ë‹ˆë‹¤.
ìŠ¤í”„ë§ ì‹œíë¦¬í‹°(Spring Security)ë¥¼ ì‚¬ìš©í•˜ë©´ íŽ¸ë¦¬í•˜ê²Œ ì¸ì¦/ì¸ê°€ë¥¼ êµ¬í˜„í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

1. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°(Spring Security)ëž€?

ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ìŠ¤í”„ë§ ê¸°ë°˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³´ì•ˆ(ì¸ì¦ê³¼ ê¶Œí•œ)ì„ ë‹´ë‹¹í•˜ëŠ” í”„ë ˆìž„ì›Œí¬ë¥¼ ë§í•©ë‹ˆë‹¤.
ë§Œì•½ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤ë©´, ìžì²´ì ìœ¼ë¡œ ì„¸ì…˜ì„ ì²´í¬í•˜ê³  ë¦¬ë‹¤ì´ë ‰íŠ¸ ë“±ì„ í•´ì•¼ í•  ê²ƒìž…ë‹ˆë‹¤.
ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ë³´ì•ˆê³¼ ê´€ë ¨í•´ì„œ ì²´ê³„ì ìœ¼ë¡œ ë§Žì€ ì˜µì…˜ë“¤ì„ ì§€ì›í•´ì¤ë‹ˆë‹¤.
ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” í•„í„°(Filter) ê¸°ë°˜ìœ¼ë¡œ ë™ìž‘í•˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ MVC ì™€ ë¶„ë¦¬ë˜ì–´ ê´€ë¦¬ ë° ë™ìž‘í•©ë‹ˆë‹¤.
ì°¸ê³ ë¡œ ìŠ¤í”„ë§ ì‹œíë¦¬í‹° 3.2ë¶€í„°ëŠ” XMLë¡œ ì„¤ì •í•˜ì§€ ì•Šê³  ìžë°” config ì„¤ì •ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìžˆë„ë¡ ì§€ì›í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

* ì ‘ê·¼ ì£¼ì²´(Principal) : ë³´í˜¸ëœ ëŒ€ìƒì— ì ‘ê·¼í•˜ëŠ” ìœ ì €
* ì¸ì¦(Authentication) : ì¸ì¦ì€ 'ì¦ëª…í•˜ë‹¤'ë¼ëŠ” ì˜ë¯¸ë¡œ ì˜ˆë¥¼ ë“¤ì–´, ìœ ì € ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì´ìš©í•˜ì—¬ ë¡œê·¸ì¸ í•˜ëŠ” ê³¼ì • ì„ ë§í•©ë‹ˆë‹¤.
* ì¸ê°€(Authorization) : 'ê¶Œí•œë¶€ì—¬'ë‚˜ 'í—ˆê°€'ì™€ ê°™ì€ ì˜ë¯¸ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ì¦‰, ì–´ë–¤ ëŒ€ìƒì´ íŠ¹ì • ëª©ì ì„ ì‹¤í˜„í•˜ë„ë¡ í—ˆìš©(Access) í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. (íšŒì›ë“±ê¸‰)
* ê¶Œí•œ : ì¸ì¦ëœ ì£¼ì²´ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ìž‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìžˆë„ë¡ í—ˆë½ë˜ì—ˆëŠ”ì§€ë¥¼ ê²°ì •í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

2. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° í•„í„°(Spring Security Filter)
![img](https://cphinf.pstatic.net/mooc/20200301_170/1583061371237SUU5o_PNG/mceclip0.png)
 
í´ë¼ì´ì–¸íŠ¸(ë³´í†µ ë¸Œë¼ìš°ì €)ëŠ” ìš”ì²­ì„ ë³´ë‚´ê³  ë˜ê³ , ê·¸ ìš”ì²­ì„ ì„œë¸”ë¦¿ì´ë‚˜ JSPë“±ì´ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.
ìŠ¤í”„ë§ MVCì—ì„œëŠ” ìš”ì²­ì„ ê°€ìž¥ ë¨¼ì € ë°›ëŠ” ê²ƒì´ DispatcherServletì´ë¼ê³  í–ˆì—ˆìŠµë‹ˆë‹¤.
ì´ DispatcherServletì´ ìš”ì²­ ë°›ê¸° ì „ì— ë‹¤ì–‘í•œ í•„í„°ë“¤ì´ ìžˆì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
í•„í„°ê°€ í•˜ëŠ” ì—­í• ì€ í´ë¼ì´ì–¸íŠ¸ì™€ ìžì› ì‚¬ì´ì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µ ì •ë³´ë¥¼ ì´ìš©í•´ ë‹¤ì–‘í•œ ì²˜ë¦¬ë¥¼ í•˜ëŠ”ë° ëª©ì ì´ ìžˆìŠµë‹ˆë‹¤.
ì–´ë–¤ í•„í„°ëŠ” ìš”ì²­ì„ ë°›ì€ í›„, í´ë¼ì´ì–¸íŠ¸ê°€ ì›ëž˜ ìš”ì²­í•œ ìžì›ì´ ì•„ë‹Œ ë‹¤ë¥¸ ìžì›ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œí‚¬ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.
ì–´ë–¤ í•„í„°ëŠ” ë‹¤ìŒ í•„í„°ì—ê²Œ ìš”ì²­ê³¼ ì‘ë‹µì„ ì „ë‹¬í•˜ì§€ ì•Šê³ , ë°”ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•˜ê³  ëë‚¼ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.

**

Authorization

Request > Filter > DispatcherServlet > Servlet
Response < Filter < DispatcherServlet < Servlet
clientê°€ http requestë¥¼ ë³´ë‚¼ ë•Œ ë¨¼ì € filterë¥¼ ê±°ì¹œë‹¤.
ì´ëŸ¬í•œ filterë“¤ì´ ì—¬ëŸ¬ê°œë¡œ ì—®ì—¬ì„œ chainì˜ í˜•íƒœë¥¼ ëˆë‹¤ê³  í•´ì„œ ìœ„ì˜ í˜•íƒœë¥¼ Filter chain(í•„í„° ì²´ì¸) ì´ë¼ê³  ë¶€ë¥¸ë‹¤.
Spring SecurityëŠ” ì´ëŸ¬í•œ Filter chain ì‚¬ì´ì— DelegatingFilterProxy ë¼ëŠ” ê²ƒì„ ë¼ì›Œë„£ì–´ì„œ ë³´ì•ˆ ì •ì±…ì„ ìˆ˜í–‰í•œë‹¤.
    ê²½ìš°ì— ë”°ë¼ì„œëŠ” ë³´ì•ˆ ì •ì±…ì„ ë‹¬ë¦¬í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— filterì˜ ì ìš©ì„ ë‹¤ë¥´ê²Œ í•´ì•¼í•  ìˆ˜ë„ ìžˆë‹¤.
    ë”°ë¼ì„œ í•„í„°ì²´ì¸ ì‚¬ì´ì— ê·¸ë£¹ì„ í•˜ë‚˜ ë¼ì›Œë„£ì–´ì„œ ê²½ìš°ì— ë”°ë¼ ë‹¤ë¥¸ ë³´ì•ˆ ì •ì±…ì„ ì ìš©í•˜ê² ë‹¤

![img](https://velog.velcdn.com/images/18k7102dy/post/b5525024-ece5-42d2-b59b-662831900013/image.png)

DelegatingFilterProxy ë‚´ë¶€ì—ëŠ” FilterChainProxy ë¼ëŠ” ê²ƒì„ í¬í•¨ì‹œì¼œì„œ ê²½ìš°ì— ë”°ë¼ filter chainì„ ê°ˆì•„ë¼ìš¸ ìˆ˜ ìžˆê²Œ Spring Securityì—ì„œëŠ” ì‚¬ìš©í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

![img](https://velog.velcdn.com/images/18k7102dy/post/56e62434-599d-46af-96fc-dc5346b0ad72/image.png)
api ìš”ì²­ì— ë”°ë¼ì„œ ë‹¤ë¥¸ ë³´ì•ˆ ì •ì±…ì„ ìˆ˜í–‰í•  ìˆ˜ ìžˆê²Œ filterë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.

**

ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê°€ì§„ í•„í„°ë“¤ì„ 10ê°œ ì´ìƒ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤. 
ì´ë ‡ê²Œ ì œê³µë˜ëŠ” í•„í„°ë“¤ì„ Security Filter Chain(ì‹œíë¦¬í‹° í•„í„° ì²´ì¸)ì´ë¼ê³  ë§í•©ë‹ˆë‹¤.

![img](https://cphinf.pstatic.net/mooc/20200301_110/1583061393744OaYB4_PNG/mceclip1.png)

ìœ„ì˜ ê·¸ë¦¼ì€ ì‹œíë¦¬í‹° í•„í„° ì²´ì¸ê³¼ ê°ê°ì˜ í•„í„°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ë“¤(Repository, Handler, Managerë“±)ì— ëŒ€í•´ ìž˜ í‘œí˜„í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

ë¨¼ì € ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ê°€ ì œê³µí•˜ëŠ” í•„í„°ë“¤ì´ ì–´ë–¤ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ”ì§€ ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

  * SecurityContextPersistenceFilter : SecurityContextRepositoryì—ì„œ SecurityContextë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ì €ìž¥í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
  * LogoutFilter : ì„¤ì •ëœ ë¡œê·¸ì•„ì›ƒ URLë¡œ ì˜¤ëŠ” ìš”ì²­ì„ ê°ì‹œí•˜ë©°, í•´ë‹¹ ìœ ì €ë¥¼ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
  * (UsernamePassword)AuthenticationFilter : (ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ëŠ” form ê¸°ë°˜ ì¸ì¦) ì„¤ì •ëœ ë¡œê·¸ì¸ URLë¡œ ì˜¤ëŠ” ìš”ì²­ì„ ê°ì‹œí•˜ë©°, ìœ ì € ì¸ì¦ ì²˜ë¦¬
        1. AuthenticationManagerë¥¼ í†µí•œ ì¸ì¦ ì‹¤í–‰
        2. ì¸ì¦ ì„±ê³µ ì‹œ, ì–»ì€ Authentication ê°ì²´ë¥¼ SecurityContextì— ì €ìž¥ í›„ AuthenticationSuccessHandler ì‹¤í–‰
        3. ì¸ì¦ ì‹¤íŒ¨ ì‹œ, AuthenticationFailureHandler ì‹¤í–‰
  * DefaultLoginPageGeneratingFilter : ì¸ì¦ì„ ìœ„í•œ ë¡œê·¸ì¸í¼ URLì„ ê°ì‹œí•œë‹¤.
  * BasicAuthenticationFilter : HTTP ê¸°ë³¸ ì¸ì¦ í—¤ë”ë¥¼ ê°ì‹œí•˜ì—¬ ì²˜ë¦¬í•œë‹¤.
  * RequestCacheAwareFilter : ë¡œê·¸ì¸ ì„±ê³µ í›„, ì›ëž˜ ìš”ì²­ ì •ë³´ë¥¼ ìž¬êµ¬ì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
  * SecurityContextHolderAwareRequestFilter : HttpServletRequestWrapperë¥¼ ìƒì†í•œ SecurityContextHolderAware RequestWapper í´ëž˜ìŠ¤ë¡œ HttpServletRequest ì •ë³´ë¥¼ ê°ì‹¼ë‹¤.
        SecurityContextHolderAwareRequestWrapper í´ëž˜ìŠ¤ëŠ” í•„í„° ì²´ì¸ìƒì˜ ë‹¤ìŒ í•„í„°ë“¤ì—ê²Œ ë¶€ê°€ì •ë³´ë¥¼ ì œê³µí•œë‹¤.
  * AnonymousAuthenticationFilter : ì´ í•„í„°ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ê¹Œì§€ ì‚¬ìš©ìž ì •ë³´ê°€ ì¸ì¦ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì¸ì¦í† í°ì— ì‚¬ìš©ìžê°€ ìµëª… ì‚¬ìš©ìžë¡œ ë‚˜íƒ€ë‚œë‹¤.
  * SessionManagementFilter : ì´ í•„í„°ëŠ” ì¸ì¦ëœ ì‚¬ìš©ìžì™€ ê´€ë ¨ëœ ëª¨ë“  ì„¸ì…˜ì„ ì¶”ì í•œë‹¤.
  * ExceptionTranslationFilter : ì´ í•„í„°ëŠ” ë³´í˜¸ëœ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì¤‘ì— ë°œìƒí•  ìˆ˜ ìžˆëŠ” ì˜ˆì™¸ë¥¼ ìœ„ìž„í•˜ê±°ë‚˜ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
  * FilterSecurityInterceptor : ì´ í•„í„°ëŠ” AccessDecisionManager ë¡œ ê¶Œí•œë¶€ì—¬ ì²˜ë¦¬ë¥¼ ìœ„ìž„í•¨ìœ¼ë¡œì¨ ì ‘ê·¼ ì œì–´ ê²°ì •ì„ ì‰½ê²Œí•´ì¤€ë‹¤.

3. ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì¸ì¦ê´€ë ¨ ì•„í‚¤í…ì²˜

ì•„ì´ë””ì™€ ì•”í˜¸ë¥¼ ìž…ë ¥í–ˆì„ ë•Œ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” í•„í„°ëŠ” AuthenticationFilterìž…ë‹ˆë‹¤.
í•´ë‹¹ í•„í„°ëŠ” ë‹¤ìŒ ê·¸ë¦¼ê³¼ ê°™ì€ ìˆœì„œë¡œ ë™ìž‘í•©ë‹ˆë‹¤.

![img](https://cphinf.pstatic.net/mooc/20200301_136/1583062306462164xS_PNG/mceclip2.png)

ìœ„ì˜ ê·¸ë¦¼ì„ ë³´ë©´ì„œ ì°¨ë¡€ëŒ€ë¡œ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§€ëŠ”ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

1. í´ë¼ì´ì–¸íŠ¸(ìœ ì €)ê°€ ë¡œê·¸ì¸ì„ ì‹œë„í•©ë‹ˆë‹¤.
2. AuthenticationFilterëŠ” AuthenticationManager, AuthenticationProvider(s), UserDetailsServiceë¥¼ í†µí•´ DBì—ì„œ ì‚¬ìš©ìž ì •ë³´ë¥¼ ì½ì–´ì˜µë‹ˆë‹¤.
    ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ UserDetailsServiceê°€ ì¸í„°íŽ˜ì´ìŠ¤ë¼ëŠ” ê²ƒìž…ë‹ˆë‹¤.
    í•´ë‹¹ ì¸í„°íŽ˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ë¹ˆ(Bean)ì„ ìƒì„±í•˜ë©´ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” í•´ë‹¹ ë¹ˆì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.
    ì¦‰, ì–´ë–¤ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë¶€í„° ì½ì–´ë“¤ì¼ì§€ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ë¥¼ ì´ìš©í•˜ëŠ” ê°œë°œìžê°€ ê²°ì •í•  ìˆ˜ ìžˆê²Œ ë©ë‹ˆë‹¤.
3. UserDetailsServiceëŠ” ë¡œê·¸ì¸í•œ IDì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ DBì—ì„œ ì½ì–´ë“¤ì—¬ UserDetailsë¥¼ êµ¬í˜„í•œ ê°ì²´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
    í”„ë¡œê·¸ëž˜ë¨¸ëŠ” UserDetailsë¥¼ êµ¬í˜„í•œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í•  í•„ìš”ê°€ ìžˆì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    UserDetailsì •ë³´ë¥¼ ì„¸ì…˜ì— ì €ìž¥í•˜ê²Œ ë©ë‹ˆë‹¤.
4. ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ì¸ë©”ëª¨ë¦¬ ì„¸ì…˜ì €ìž¥ì†Œì¸ SecurityContextHolderì— UserDetailsì •ë³´ë¥¼ ì €ìž¥í•˜ê²Œ ë©ë‹ˆë‹¤.
5. í´ë¼ì´ì–¸íŠ¸(ìœ ì €)ì—ê²Œ session ID(JSESSION ID)ì™€ í•¨ê»˜ ì‘ë‹µì„ í•˜ê²Œ ë©ë‹ˆë‹¤.
6. ì´í›„ ìš”ì²­ì—ì„œëŠ” ìš”ì²­ ì¿ í‚¤ì—ì„œ JSESSION IDì •ë³´ë¥¼ í†µí•´ ì´ë¯¸ ë¡œê·¸ì¸ ì •ë³´ê°€ ì €ìž¥ë˜ì–´ ìžˆëŠ” ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì´ë¯¸ ì €ìž¥ë˜ì–´ ìžˆê³  ìœ íš¨í•˜ë©´ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•´ì£¼ê²Œ ë©ë‹ˆë‹¤.

# NEXT